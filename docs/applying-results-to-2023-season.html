<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 7 Applying Results to 2023 Season | Quality of Location - developing a new pitch metric</title>
  <meta name="description" content="Chapter 7 Applying Results to 2023 Season | Quality of Location - developing a new pitch metric" />
  <meta name="generator" content="bookdown 0.37 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 7 Applying Results to 2023 Season | Quality of Location - developing a new pitch metric" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 Applying Results to 2023 Season | Quality of Location - developing a new pitch metric" />
  
  
  

<meta name="author" content="Doug Rose" />


<meta name="date" content="2023-12-16" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="visualizing-resulting-plots.html"/>
<link rel="next" href="shiny-dashbaord.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Pitch Location Quality Project</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#project-overview"><i class="fa fa-check"></i><b>1.1</b> Project Overview</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="extracting-cleaning-validating-transforming.html"><a href="extracting-cleaning-validating-transforming.html"><i class="fa fa-check"></i><b>2</b> Extracting, Cleaning, Validating, Transforming</a>
<ul>
<li class="chapter" data-level="2.1" data-path="extracting-cleaning-validating-transforming.html"><a href="extracting-cleaning-validating-transforming.html#extracting-dataset"><i class="fa fa-check"></i><b>2.1</b> Extracting Dataset</a></li>
<li class="chapter" data-level="2.2" data-path="extracting-cleaning-validating-transforming.html"><a href="extracting-cleaning-validating-transforming.html#explain-variables-of-interest"><i class="fa fa-check"></i><b>2.2</b> Explain Variables of Interest</a></li>
<li class="chapter" data-level="2.3" data-path="extracting-cleaning-validating-transforming.html"><a href="extracting-cleaning-validating-transforming.html#create-new-variables"><i class="fa fa-check"></i><b>2.3</b> Create New Variables</a></li>
<li class="chapter" data-level="2.4" data-path="extracting-cleaning-validating-transforming.html"><a href="extracting-cleaning-validating-transforming.html#validating-count-handedness-game-year"><i class="fa fa-check"></i><b>2.4</b> Validating Count, Handedness, Game Year</a></li>
<li class="chapter" data-level="2.5" data-path="extracting-cleaning-validating-transforming.html"><a href="extracting-cleaning-validating-transforming.html#remove-and-transform-event-values"><i class="fa fa-check"></i><b>2.5</b> Remove and Transform Event Values</a></li>
<li class="chapter" data-level="2.6" data-path="extracting-cleaning-validating-transforming.html"><a href="extracting-cleaning-validating-transforming.html#event-outcome-frequency-by-count"><i class="fa fa-check"></i><b>2.6</b> Event Outcome Frequency by Count</a></li>
<li class="chapter" data-level="2.7" data-path="extracting-cleaning-validating-transforming.html"><a href="extracting-cleaning-validating-transforming.html#average-delta-run-expectancy"><i class="fa fa-check"></i><b>2.7</b> Average Delta Run Expectancy</a></li>
<li class="chapter" data-level="2.8" data-path="extracting-cleaning-validating-transforming.html"><a href="extracting-cleaning-validating-transforming.html#join-lookup-table-to-data-set"><i class="fa fa-check"></i><b>2.8</b> Join Lookup Table to Data Set</a></li>
<li class="chapter" data-level="2.9" data-path="extracting-cleaning-validating-transforming.html"><a href="extracting-cleaning-validating-transforming.html#addressing-pitch-types"><i class="fa fa-check"></i><b>2.9</b> Addressing Pitch Types</a></li>
<li class="chapter" data-level="2.10" data-path="extracting-cleaning-validating-transforming.html"><a href="extracting-cleaning-validating-transforming.html#cleaning-pitch-locations"><i class="fa fa-check"></i><b>2.10</b> Cleaning Pitch Locations</a></li>
<li class="chapter" data-level="2.11" data-path="extracting-cleaning-validating-transforming.html"><a href="extracting-cleaning-validating-transforming.html#count-of-all-observations"><i class="fa fa-check"></i><b>2.11</b> Count of All Observations</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="example-model.html"><a href="example-model.html"><i class="fa fa-check"></i><b>3</b> Example Model</a>
<ul>
<li class="chapter" data-level="3.1" data-path="example-model.html"><a href="example-model.html#scatterplot-of-example-data"><i class="fa fa-check"></i><b>3.1</b> Scatterplot of Example Data</a></li>
<li class="chapter" data-level="3.2" data-path="example-model.html"><a href="example-model.html#scatterplot-of-example-data-filtered"><i class="fa fa-check"></i><b>3.2</b> Scatterplot of Example Data Filtered</a></li>
<li class="chapter" data-level="3.3" data-path="example-model.html"><a href="example-model.html#create-grid"><i class="fa fa-check"></i><b>3.3</b> Create Grid</a></li>
<li class="chapter" data-level="3.4" data-path="example-model.html"><a href="example-model.html#apply-game-results-to-grid"><i class="fa fa-check"></i><b>3.4</b> Apply Game Results to Grid</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>4</b> Functions</a>
<ul>
<li class="chapter" data-level="4.1" data-path="functions.html"><a href="functions.html#function-1"><i class="fa fa-check"></i><b>4.1</b> Function 1</a></li>
<li class="chapter" data-level="4.2" data-path="functions.html"><a href="functions.html#function-2"><i class="fa fa-check"></i><b>4.2</b> Function 2</a></li>
<li class="chapter" data-level="4.3" data-path="functions.html"><a href="functions.html#function-3"><i class="fa fa-check"></i><b>4.3</b> Function 3</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="applying-functions.html"><a href="applying-functions.html"><i class="fa fa-check"></i><b>5</b> Applying Functions</a>
<ul>
<li class="chapter" data-level="5.1" data-path="applying-functions.html"><a href="applying-functions.html#create-data-frames"><i class="fa fa-check"></i><b>5.1</b> Create Data Frames</a></li>
<li class="chapter" data-level="5.2" data-path="applying-functions.html"><a href="applying-functions.html#create-plots"><i class="fa fa-check"></i><b>5.2</b> Create Plots</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="visualizing-resulting-plots.html"><a href="visualizing-resulting-plots.html"><i class="fa fa-check"></i><b>6</b> Visualizing Resulting Plots</a>
<ul>
<li class="chapter" data-level="6.1" data-path="visualizing-resulting-plots.html"><a href="visualizing-resulting-plots.html#plot-outputs"><i class="fa fa-check"></i><b>6.1</b> Plot Outputs</a></li>
<li class="chapter" data-level="6.2" data-path="visualizing-resulting-plots.html"><a href="visualizing-resulting-plots.html#compile-results-into-1-lookup-table"><i class="fa fa-check"></i><b>6.2</b> Compile Results into 1 Lookup Table</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="applying-results-to-2023-season.html"><a href="applying-results-to-2023-season.html"><i class="fa fa-check"></i><b>7</b> Applying Results to 2023 Season</a>
<ul>
<li class="chapter" data-level="7.1" data-path="applying-results-to-2023-season.html"><a href="applying-results-to-2023-season.html#cleaning-2023-dataset"><i class="fa fa-check"></i><b>7.1</b> Cleaning 2023 Dataset</a></li>
<li class="chapter" data-level="7.2" data-path="applying-results-to-2023-season.html"><a href="applying-results-to-2023-season.html#location-quality-by-pitch-type"><i class="fa fa-check"></i><b>7.2</b> Location Quality by Pitch Type</a></li>
<li class="chapter" data-level="7.3" data-path="applying-results-to-2023-season.html"><a href="applying-results-to-2023-season.html#location-quality-by-count"><i class="fa fa-check"></i><b>7.3</b> Location Quality by Count</a></li>
<li class="chapter" data-level="7.4" data-path="applying-results-to-2023-season.html"><a href="applying-results-to-2023-season.html#final-cleaning"><i class="fa fa-check"></i><b>7.4</b> Final Cleaning</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="shiny-dashbaord.html"><a href="shiny-dashbaord.html"><i class="fa fa-check"></i><b>8</b> Shiny Dashbaord</a></li>
<li class="chapter" data-level="9" data-path="project-takeaways-and-limitations.html"><a href="project-takeaways-and-limitations.html"><i class="fa fa-check"></i><b>9</b> Project Takeaways and Limitations</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Quality of Location - developing a new pitch metric</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="applying-results-to-2023-season" class="section level1 hasAnchor" number="7">
<h1><span class="header-section-number">Chapter 7</span> Applying Results to 2023 Season<a href="applying-results-to-2023-season.html#applying-results-to-2023-season" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Now, with the compiled pitch quality data frame, we have the means to associate a pitch location value with each pitch in a given season, such as 2023. It’s important to note that outlier pitches falling outside the 99% region won’t have a corresponding pitch value for now. As a temporary solution, these outliers are excluded from the ongoing analysis.</p>
<p>In the following steps, I’ll reload the 2023 season data and perform some cleaning before integrating the pitch quality lookup data frame.</p>
<div id="cleaning-2023-dataset" class="section level2 hasAnchor" number="7.1">
<h2><span class="header-section-number">7.1</span> Cleaning 2023 Dataset<a href="applying-results-to-2023-season.html#cleaning-2023-dataset" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="applying-results-to-2023-season.html#cb153-1" tabindex="-1"></a>mlbraw2023 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;/Users/dougrose/Desktop/location/raw_statcast/mlbraw2023.csv&quot;</span>)</span>
<span id="cb153-2"><a href="applying-results-to-2023-season.html#cb153-2" tabindex="-1"></a>mlbraw2023<span class="sc">$</span>game_date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(mlbraw2023<span class="sc">$</span>game_date, <span class="at">format=</span><span class="st">&quot;%m/%d/%y&quot;</span>)</span>
<span id="cb153-3"><a href="applying-results-to-2023-season.html#cb153-3" tabindex="-1"></a></span>
<span id="cb153-4"><a href="applying-results-to-2023-season.html#cb153-4" tabindex="-1"></a>mlbraw2023 <span class="ot">&lt;-</span> mlbraw2023 <span class="sc">%&gt;%</span></span>
<span id="cb153-5"><a href="applying-results-to-2023-season.html#cb153-5" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">events =</span> <span class="fu">if_else</span>(<span class="fu">is.na</span>(events) <span class="sc">|</span> events <span class="sc">==</span> <span class="st">&quot;&quot;</span>, type, events)) <span class="sc">%&gt;%</span></span>
<span id="cb153-6"><a href="applying-results-to-2023-season.html#cb153-6" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">events =</span> <span class="fu">if_else</span>(events <span class="sc">==</span> <span class="st">&quot;B&quot;</span>, <span class="st">&quot;ball&quot;</span>, </span>
<span id="cb153-7"><a href="applying-results-to-2023-season.html#cb153-7" tabindex="-1"></a>                          <span class="fu">if_else</span>(events <span class="sc">==</span> <span class="st">&quot;S&quot;</span>, <span class="st">&quot;strike&quot;</span>, events))) <span class="sc">%&gt;%</span></span>
<span id="cb153-8"><a href="applying-results-to-2023-season.html#cb153-8" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">count =</span> <span class="fu">paste</span>(balls, strikes, <span class="at">sep=</span><span class="st">&quot;-&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb153-9"><a href="applying-results-to-2023-season.html#cb153-9" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">hand =</span> <span class="fu">paste</span>(p_throws, stand, <span class="at">sep =</span> <span class="st">&quot;v&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb153-10"><a href="applying-results-to-2023-season.html#cb153-10" tabindex="-1"></a><span class="fu">select</span>(player_name, pitch_type, pitch_name, count, hand, plate_x, plate_z)</span>
<span id="cb153-11"><a href="applying-results-to-2023-season.html#cb153-11" tabindex="-1"></a></span>
<span id="cb153-12"><a href="applying-results-to-2023-season.html#cb153-12" tabindex="-1"></a>mlbraw2023 <span class="ot">&lt;-</span> mlbraw2023 <span class="sc">%&gt;%</span> </span>
<span id="cb153-13"><a href="applying-results-to-2023-season.html#cb153-13" tabindex="-1"></a>  <span class="fu">filter</span>(pitch_type <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;FF&quot;</span>,<span class="st">&quot;SI&quot;</span>,<span class="st">&quot;FC&quot;</span>,<span class="st">&quot;FS&quot;</span>,<span class="st">&quot;CH&quot;</span>,<span class="st">&quot;CU&quot;</span>,</span>
<span id="cb153-14"><a href="applying-results-to-2023-season.html#cb153-14" tabindex="-1"></a>                           <span class="st">&quot;CS&quot;</span>,<span class="st">&quot;KC&quot;</span>,<span class="st">&quot;SV&quot;</span>,<span class="st">&quot;SL&quot;</span>,<span class="st">&quot;ST&quot;</span>))</span>
<span id="cb153-15"><a href="applying-results-to-2023-season.html#cb153-15" tabindex="-1"></a></span>
<span id="cb153-16"><a href="applying-results-to-2023-season.html#cb153-16" tabindex="-1"></a>mlbraw2023 <span class="ot">&lt;-</span> mlbraw2023 <span class="sc">%&gt;%</span></span>
<span id="cb153-17"><a href="applying-results-to-2023-season.html#cb153-17" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pitch_type2 =</span> <span class="fu">if_else</span>(pitch_type <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;CU&quot;</span>,<span class="st">&quot;CS&quot;</span>,<span class="st">&quot;KC&quot;</span>,<span class="st">&quot;SV&quot;</span>), <span class="st">&quot;CU&quot;</span>,</span>
<span id="cb153-18"><a href="applying-results-to-2023-season.html#cb153-18" tabindex="-1"></a>                              <span class="fu">if_else</span>(pitch_type <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;CH&quot;</span>,<span class="st">&quot;FS&quot;</span>), <span class="st">&quot;CH&quot;</span>,</span>
<span id="cb153-19"><a href="applying-results-to-2023-season.html#cb153-19" tabindex="-1"></a>                                      <span class="fu">if_else</span>(pitch_type <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;SL&quot;</span>,<span class="st">&quot;ST&quot;</span>), <span class="st">&quot;SL&quot;</span>, </span>
<span id="cb153-20"><a href="applying-results-to-2023-season.html#cb153-20" tabindex="-1"></a>                                              pitch_type))))</span>
<span id="cb153-21"><a href="applying-results-to-2023-season.html#cb153-21" tabindex="-1"></a></span>
<span id="cb153-22"><a href="applying-results-to-2023-season.html#cb153-22" tabindex="-1"></a>mlbraw2023 <span class="ot">&lt;-</span> mlbraw2023 <span class="sc">%&gt;%</span></span>
<span id="cb153-23"><a href="applying-results-to-2023-season.html#cb153-23" tabindex="-1"></a>  <span class="fu">inner_join</span>(huge_lookup, </span>
<span id="cb153-24"><a href="applying-results-to-2023-season.html#cb153-24" tabindex="-1"></a>             <span class="fu">join_by</span>(hand<span class="sc">==</span>hand, pitch_type2<span class="sc">==</span>pitch_type, count<span class="sc">==</span>count, plate_x<span class="sc">==</span>x, plate_z<span class="sc">==</span>y))</span>
<span id="cb153-25"><a href="applying-results-to-2023-season.html#cb153-25" tabindex="-1"></a></span>
<span id="cb153-26"><a href="applying-results-to-2023-season.html#cb153-26" tabindex="-1"></a>mlbraw2023 <span class="ot">&lt;-</span> mlbraw2023 <span class="sc">%&gt;%</span></span>
<span id="cb153-27"><a href="applying-results-to-2023-season.html#cb153-27" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pitch_type =</span> <span class="fu">if_else</span>(pitch_type <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;CU&quot;</span>,<span class="st">&quot;CS&quot;</span>,<span class="st">&quot;KC&quot;</span>,<span class="st">&quot;SV&quot;</span>), <span class="st">&quot;CU&quot;</span>, pitch_type)) <span class="sc">%&gt;%</span></span>
<span id="cb153-28"><a href="applying-results-to-2023-season.html#cb153-28" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>pitch_type2)</span>
<span id="cb153-29"><a href="applying-results-to-2023-season.html#cb153-29" tabindex="-1"></a></span>
<span id="cb153-30"><a href="applying-results-to-2023-season.html#cb153-30" tabindex="-1"></a>mlbraw2023 <span class="ot">&lt;-</span> mlbraw2023 <span class="sc">%&gt;%</span> </span>
<span id="cb153-31"><a href="applying-results-to-2023-season.html#cb153-31" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pitch_name =</span> <span class="fu">if_else</span>(</span>
<span id="cb153-32"><a href="applying-results-to-2023-season.html#cb153-32" tabindex="-1"></a>    pitch_name <span class="sc">==</span> <span class="st">&quot;4-Seam Fastball&quot;</span>, <span class="st">&quot;Fastball&quot;</span>,</span>
<span id="cb153-33"><a href="applying-results-to-2023-season.html#cb153-33" tabindex="-1"></a>    <span class="fu">if_else</span>(pitch_name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Curveball&quot;</span>,<span class="st">&quot;Slow Curve&quot;</span>,<span class="st">&quot;Knuckle Curve&quot;</span>, <span class="st">&quot;Slurve&quot;</span>), <span class="st">&quot;Curveball&quot;</span>,</span>
<span id="cb153-34"><a href="applying-results-to-2023-season.html#cb153-34" tabindex="-1"></a>            <span class="fu">if_else</span>(pitch_name <span class="sc">==</span> <span class="st">&quot;Split-Finger&quot;</span>, <span class="st">&quot;Splitter&quot;</span>, pitch_name))))</span></code></pre></div>
</div>
<div id="location-quality-by-pitch-type" class="section level2 hasAnchor" number="7.2">
<h2><span class="header-section-number">7.2</span> Location Quality by Pitch Type<a href="applying-results-to-2023-season.html#location-quality-by-pitch-type" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>I’ll briefly profile the resulting pitch quality metric. Accounting for all pitches in 2023 with a corresponding pitch location quality number, here is the distribution of values based on pitch type. Across all 6 pitch type levels, a similar distribution pattern emerges. We see the highest peak of around 0.8 across all pitch types followed by a lower peak around 0.25. 4-Seam Fastballs, Sinkers, and Cutters have better overall pitch location values compared to Changeups. Changeups have a more even distribution of values from 0 to 1. Meaning we would expect pitchers throwing a high rate of Changeups in 2023 to generally score lower than other pitchers.</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="applying-results-to-2023-season.html#cb154-1" tabindex="-1"></a>ff <span class="ot">&lt;-</span> mlbraw2023 <span class="sc">%&gt;%</span></span>
<span id="cb154-2"><a href="applying-results-to-2023-season.html#cb154-2" tabindex="-1"></a>  <span class="fu">filter</span>(pitch_type <span class="sc">==</span> <span class="st">&quot;FF&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb154-3"><a href="applying-results-to-2023-season.html#cb154-3" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> pq)) <span class="sc">+</span></span>
<span id="cb154-4"><a href="applying-results-to-2023-season.html#cb154-4" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">after_stat</span>(count <span class="sc">/</span> <span class="fu">sum</span>(count))), <span class="at">binwidth=</span><span class="fl">0.025</span>) <span class="sc">+</span></span>
<span id="cb154-5"><a href="applying-results-to-2023-season.html#cb154-5" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>,<span class="fl">0.06</span>)<span class="sc">+</span></span>
<span id="cb154-6"><a href="applying-results-to-2023-season.html#cb154-6" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;4-seam fastballs&quot;</span>)<span class="sc">+</span></span>
<span id="cb154-7"><a href="applying-results-to-2023-season.html#cb154-7" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span>
<span id="cb154-8"><a href="applying-results-to-2023-season.html#cb154-8" tabindex="-1"></a>si <span class="ot">&lt;-</span> mlbraw2023 <span class="sc">%&gt;%</span></span>
<span id="cb154-9"><a href="applying-results-to-2023-season.html#cb154-9" tabindex="-1"></a>  <span class="fu">filter</span>(pitch_type <span class="sc">==</span> <span class="st">&quot;SI&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb154-10"><a href="applying-results-to-2023-season.html#cb154-10" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> pq)) <span class="sc">+</span></span>
<span id="cb154-11"><a href="applying-results-to-2023-season.html#cb154-11" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">after_stat</span>(count <span class="sc">/</span> <span class="fu">sum</span>(count))), <span class="at">binwidth=</span><span class="fl">0.025</span>) <span class="sc">+</span></span>
<span id="cb154-12"><a href="applying-results-to-2023-season.html#cb154-12" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>,<span class="fl">0.06</span>)<span class="sc">+</span></span>
<span id="cb154-13"><a href="applying-results-to-2023-season.html#cb154-13" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;sinkers&quot;</span>)<span class="sc">+</span></span>
<span id="cb154-14"><a href="applying-results-to-2023-season.html#cb154-14" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span>
<span id="cb154-15"><a href="applying-results-to-2023-season.html#cb154-15" tabindex="-1"></a>fc <span class="ot">&lt;-</span> mlbraw2023 <span class="sc">%&gt;%</span></span>
<span id="cb154-16"><a href="applying-results-to-2023-season.html#cb154-16" tabindex="-1"></a>  <span class="fu">filter</span>(pitch_type <span class="sc">==</span> <span class="st">&quot;FC&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb154-17"><a href="applying-results-to-2023-season.html#cb154-17" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> pq)) <span class="sc">+</span></span>
<span id="cb154-18"><a href="applying-results-to-2023-season.html#cb154-18" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">after_stat</span>(count <span class="sc">/</span> <span class="fu">sum</span>(count))), <span class="at">binwidth=</span><span class="fl">0.025</span>) <span class="sc">+</span></span>
<span id="cb154-19"><a href="applying-results-to-2023-season.html#cb154-19" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>,<span class="fl">0.06</span>)<span class="sc">+</span></span>
<span id="cb154-20"><a href="applying-results-to-2023-season.html#cb154-20" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;cutters&quot;</span>)<span class="sc">+</span></span>
<span id="cb154-21"><a href="applying-results-to-2023-season.html#cb154-21" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span>
<span id="cb154-22"><a href="applying-results-to-2023-season.html#cb154-22" tabindex="-1"></a>ch <span class="ot">&lt;-</span> mlbraw2023 <span class="sc">%&gt;%</span></span>
<span id="cb154-23"><a href="applying-results-to-2023-season.html#cb154-23" tabindex="-1"></a>  <span class="fu">filter</span>(pitch_type <span class="sc">==</span> <span class="st">&quot;CH&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb154-24"><a href="applying-results-to-2023-season.html#cb154-24" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> pq)) <span class="sc">+</span></span>
<span id="cb154-25"><a href="applying-results-to-2023-season.html#cb154-25" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">after_stat</span>(count <span class="sc">/</span> <span class="fu">sum</span>(count))), <span class="at">binwidth=</span><span class="fl">0.025</span>) <span class="sc">+</span></span>
<span id="cb154-26"><a href="applying-results-to-2023-season.html#cb154-26" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>,<span class="fl">0.06</span>)<span class="sc">+</span></span>
<span id="cb154-27"><a href="applying-results-to-2023-season.html#cb154-27" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;changeups&quot;</span>)<span class="sc">+</span></span>
<span id="cb154-28"><a href="applying-results-to-2023-season.html#cb154-28" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span>
<span id="cb154-29"><a href="applying-results-to-2023-season.html#cb154-29" tabindex="-1"></a>cu <span class="ot">&lt;-</span> mlbraw2023 <span class="sc">%&gt;%</span></span>
<span id="cb154-30"><a href="applying-results-to-2023-season.html#cb154-30" tabindex="-1"></a>  <span class="fu">filter</span>(pitch_type <span class="sc">==</span> <span class="st">&quot;CU&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb154-31"><a href="applying-results-to-2023-season.html#cb154-31" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> pq)) <span class="sc">+</span></span>
<span id="cb154-32"><a href="applying-results-to-2023-season.html#cb154-32" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">after_stat</span>(count <span class="sc">/</span> <span class="fu">sum</span>(count))), <span class="at">binwidth=</span><span class="fl">0.025</span>) <span class="sc">+</span></span>
<span id="cb154-33"><a href="applying-results-to-2023-season.html#cb154-33" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>,<span class="fl">0.06</span>)<span class="sc">+</span></span>
<span id="cb154-34"><a href="applying-results-to-2023-season.html#cb154-34" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;curveballs&quot;</span>)<span class="sc">+</span></span>
<span id="cb154-35"><a href="applying-results-to-2023-season.html#cb154-35" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span>
<span id="cb154-36"><a href="applying-results-to-2023-season.html#cb154-36" tabindex="-1"></a>sl <span class="ot">&lt;-</span> mlbraw2023 <span class="sc">%&gt;%</span></span>
<span id="cb154-37"><a href="applying-results-to-2023-season.html#cb154-37" tabindex="-1"></a>  <span class="fu">filter</span>(pitch_type <span class="sc">==</span> <span class="st">&quot;SL&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb154-38"><a href="applying-results-to-2023-season.html#cb154-38" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> pq)) <span class="sc">+</span></span>
<span id="cb154-39"><a href="applying-results-to-2023-season.html#cb154-39" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">after_stat</span>(count <span class="sc">/</span> <span class="fu">sum</span>(count))), <span class="at">binwidth=</span><span class="fl">0.025</span>) <span class="sc">+</span></span>
<span id="cb154-40"><a href="applying-results-to-2023-season.html#cb154-40" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>,<span class="fl">0.06</span>)<span class="sc">+</span></span>
<span id="cb154-41"><a href="applying-results-to-2023-season.html#cb154-41" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;sliders&quot;</span>)<span class="sc">+</span></span>
<span id="cb154-42"><a href="applying-results-to-2023-season.html#cb154-42" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span>
<span id="cb154-43"><a href="applying-results-to-2023-season.html#cb154-43" tabindex="-1"></a></span>
<span id="cb154-44"><a href="applying-results-to-2023-season.html#cb154-44" tabindex="-1"></a><span class="fu">ggarrange</span>(ff, si, fc, ch, cu, sl, <span class="at">ncol=</span><span class="dv">2</span>, <span class="at">nrow=</span><span class="dv">3</span>)</span></code></pre></div>
<pre><code>## Warning: Removed 1 rows containing missing values (`geom_bar()`).</code></pre>
<p><img src="bookdownproj_files/figure-html/distribution%20of%20location%20quality%20by%20pitch%20type-1.png" width="768" style="display: block; margin: auto auto auto 0;" /></p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="applying-results-to-2023-season.html#cb156-1" tabindex="-1"></a><span class="fu">rm</span>(ff, si, fc, ch, cu, sl)</span></code></pre></div>
</div>
<div id="location-quality-by-count" class="section level2 hasAnchor" number="7.3">
<h2><span class="header-section-number">7.3</span> Location Quality by Count<a href="applying-results-to-2023-season.html#location-quality-by-count" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="applying-results-to-2023-season.html#cb157-1" tabindex="-1"></a>zero_zero <span class="ot">&lt;-</span> mlbraw2023 <span class="sc">%&gt;%</span></span>
<span id="cb157-2"><a href="applying-results-to-2023-season.html#cb157-2" tabindex="-1"></a>  <span class="fu">filter</span>(count <span class="sc">==</span> <span class="st">&quot;0-0&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb157-3"><a href="applying-results-to-2023-season.html#cb157-3" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> pq)) <span class="sc">+</span></span>
<span id="cb157-4"><a href="applying-results-to-2023-season.html#cb157-4" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">after_stat</span>(count <span class="sc">/</span> <span class="fu">sum</span>(count))), <span class="at">binwidth=</span><span class="fl">0.01</span>) <span class="sc">+</span></span>
<span id="cb157-5"><a href="applying-results-to-2023-season.html#cb157-5" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>,<span class="fl">0.05</span>)<span class="sc">+</span></span>
<span id="cb157-6"><a href="applying-results-to-2023-season.html#cb157-6" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;0-0&quot;</span>)<span class="sc">+</span></span>
<span id="cb157-7"><a href="applying-results-to-2023-season.html#cb157-7" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span>
<span id="cb157-8"><a href="applying-results-to-2023-season.html#cb157-8" tabindex="-1"></a>zero_one <span class="ot">&lt;-</span> mlbraw2023 <span class="sc">%&gt;%</span></span>
<span id="cb157-9"><a href="applying-results-to-2023-season.html#cb157-9" tabindex="-1"></a>  <span class="fu">filter</span>(count <span class="sc">==</span> <span class="st">&quot;0-1&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb157-10"><a href="applying-results-to-2023-season.html#cb157-10" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> pq)) <span class="sc">+</span></span>
<span id="cb157-11"><a href="applying-results-to-2023-season.html#cb157-11" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">after_stat</span>(count <span class="sc">/</span> <span class="fu">sum</span>(count))), <span class="at">binwidth=</span><span class="fl">0.01</span>) <span class="sc">+</span></span>
<span id="cb157-12"><a href="applying-results-to-2023-season.html#cb157-12" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>,<span class="fl">0.05</span>)<span class="sc">+</span></span>
<span id="cb157-13"><a href="applying-results-to-2023-season.html#cb157-13" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;0-1&quot;</span>)<span class="sc">+</span></span>
<span id="cb157-14"><a href="applying-results-to-2023-season.html#cb157-14" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span>
<span id="cb157-15"><a href="applying-results-to-2023-season.html#cb157-15" tabindex="-1"></a>zero_two <span class="ot">&lt;-</span> mlbraw2023 <span class="sc">%&gt;%</span></span>
<span id="cb157-16"><a href="applying-results-to-2023-season.html#cb157-16" tabindex="-1"></a>  <span class="fu">filter</span>(count <span class="sc">==</span> <span class="st">&quot;0-2&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb157-17"><a href="applying-results-to-2023-season.html#cb157-17" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> pq)) <span class="sc">+</span></span>
<span id="cb157-18"><a href="applying-results-to-2023-season.html#cb157-18" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">after_stat</span>(count <span class="sc">/</span> <span class="fu">sum</span>(count))), <span class="at">binwidth=</span><span class="fl">0.01</span>) <span class="sc">+</span></span>
<span id="cb157-19"><a href="applying-results-to-2023-season.html#cb157-19" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>,<span class="fl">0.05</span>)<span class="sc">+</span></span>
<span id="cb157-20"><a href="applying-results-to-2023-season.html#cb157-20" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;0-2&quot;</span>)<span class="sc">+</span></span>
<span id="cb157-21"><a href="applying-results-to-2023-season.html#cb157-21" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span>
<span id="cb157-22"><a href="applying-results-to-2023-season.html#cb157-22" tabindex="-1"></a>one_zero <span class="ot">&lt;-</span> mlbraw2023 <span class="sc">%&gt;%</span></span>
<span id="cb157-23"><a href="applying-results-to-2023-season.html#cb157-23" tabindex="-1"></a>  <span class="fu">filter</span>(count <span class="sc">==</span> <span class="st">&quot;1-0&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb157-24"><a href="applying-results-to-2023-season.html#cb157-24" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> pq)) <span class="sc">+</span></span>
<span id="cb157-25"><a href="applying-results-to-2023-season.html#cb157-25" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">after_stat</span>(count <span class="sc">/</span> <span class="fu">sum</span>(count))), <span class="at">binwidth=</span><span class="fl">0.01</span>) <span class="sc">+</span></span>
<span id="cb157-26"><a href="applying-results-to-2023-season.html#cb157-26" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>,<span class="fl">0.05</span>)<span class="sc">+</span></span>
<span id="cb157-27"><a href="applying-results-to-2023-season.html#cb157-27" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;1-0&quot;</span>)<span class="sc">+</span></span>
<span id="cb157-28"><a href="applying-results-to-2023-season.html#cb157-28" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span>
<span id="cb157-29"><a href="applying-results-to-2023-season.html#cb157-29" tabindex="-1"></a>one_one <span class="ot">&lt;-</span> mlbraw2023 <span class="sc">%&gt;%</span></span>
<span id="cb157-30"><a href="applying-results-to-2023-season.html#cb157-30" tabindex="-1"></a>  <span class="fu">filter</span>(count <span class="sc">==</span> <span class="st">&quot;1-1&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb157-31"><a href="applying-results-to-2023-season.html#cb157-31" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> pq)) <span class="sc">+</span></span>
<span id="cb157-32"><a href="applying-results-to-2023-season.html#cb157-32" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">after_stat</span>(count <span class="sc">/</span> <span class="fu">sum</span>(count))), <span class="at">binwidth=</span><span class="fl">0.01</span>) <span class="sc">+</span></span>
<span id="cb157-33"><a href="applying-results-to-2023-season.html#cb157-33" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>,<span class="fl">0.05</span>)<span class="sc">+</span></span>
<span id="cb157-34"><a href="applying-results-to-2023-season.html#cb157-34" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;1-1&quot;</span>)<span class="sc">+</span></span>
<span id="cb157-35"><a href="applying-results-to-2023-season.html#cb157-35" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span>
<span id="cb157-36"><a href="applying-results-to-2023-season.html#cb157-36" tabindex="-1"></a>one_two <span class="ot">&lt;-</span> mlbraw2023 <span class="sc">%&gt;%</span></span>
<span id="cb157-37"><a href="applying-results-to-2023-season.html#cb157-37" tabindex="-1"></a>  <span class="fu">filter</span>(count <span class="sc">==</span> <span class="st">&quot;1-2&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb157-38"><a href="applying-results-to-2023-season.html#cb157-38" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> pq)) <span class="sc">+</span></span>
<span id="cb157-39"><a href="applying-results-to-2023-season.html#cb157-39" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">after_stat</span>(count <span class="sc">/</span> <span class="fu">sum</span>(count))), <span class="at">binwidth=</span><span class="fl">0.01</span>) <span class="sc">+</span></span>
<span id="cb157-40"><a href="applying-results-to-2023-season.html#cb157-40" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>,<span class="fl">0.05</span>)<span class="sc">+</span></span>
<span id="cb157-41"><a href="applying-results-to-2023-season.html#cb157-41" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;1-2&quot;</span>)<span class="sc">+</span></span>
<span id="cb157-42"><a href="applying-results-to-2023-season.html#cb157-42" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span>
<span id="cb157-43"><a href="applying-results-to-2023-season.html#cb157-43" tabindex="-1"></a>two_zero <span class="ot">&lt;-</span> mlbraw2023 <span class="sc">%&gt;%</span></span>
<span id="cb157-44"><a href="applying-results-to-2023-season.html#cb157-44" tabindex="-1"></a>  <span class="fu">filter</span>(count <span class="sc">==</span> <span class="st">&quot;2-0&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb157-45"><a href="applying-results-to-2023-season.html#cb157-45" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> pq)) <span class="sc">+</span></span>
<span id="cb157-46"><a href="applying-results-to-2023-season.html#cb157-46" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">after_stat</span>(count <span class="sc">/</span> <span class="fu">sum</span>(count))), <span class="at">binwidth=</span><span class="fl">0.01</span>) <span class="sc">+</span></span>
<span id="cb157-47"><a href="applying-results-to-2023-season.html#cb157-47" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>,<span class="fl">0.05</span>)<span class="sc">+</span></span>
<span id="cb157-48"><a href="applying-results-to-2023-season.html#cb157-48" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;2-0&quot;</span>)<span class="sc">+</span></span>
<span id="cb157-49"><a href="applying-results-to-2023-season.html#cb157-49" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span>
<span id="cb157-50"><a href="applying-results-to-2023-season.html#cb157-50" tabindex="-1"></a>two_one <span class="ot">&lt;-</span> mlbraw2023 <span class="sc">%&gt;%</span></span>
<span id="cb157-51"><a href="applying-results-to-2023-season.html#cb157-51" tabindex="-1"></a>  <span class="fu">filter</span>(count <span class="sc">==</span> <span class="st">&quot;2-1&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb157-52"><a href="applying-results-to-2023-season.html#cb157-52" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> pq)) <span class="sc">+</span></span>
<span id="cb157-53"><a href="applying-results-to-2023-season.html#cb157-53" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">after_stat</span>(count <span class="sc">/</span> <span class="fu">sum</span>(count))), <span class="at">binwidth=</span><span class="fl">0.01</span>) <span class="sc">+</span></span>
<span id="cb157-54"><a href="applying-results-to-2023-season.html#cb157-54" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>,<span class="fl">0.05</span>)<span class="sc">+</span></span>
<span id="cb157-55"><a href="applying-results-to-2023-season.html#cb157-55" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;2-1&quot;</span>)<span class="sc">+</span></span>
<span id="cb157-56"><a href="applying-results-to-2023-season.html#cb157-56" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span>
<span id="cb157-57"><a href="applying-results-to-2023-season.html#cb157-57" tabindex="-1"></a>two_two <span class="ot">&lt;-</span> mlbraw2023 <span class="sc">%&gt;%</span></span>
<span id="cb157-58"><a href="applying-results-to-2023-season.html#cb157-58" tabindex="-1"></a>  <span class="fu">filter</span>(count <span class="sc">==</span> <span class="st">&quot;2-2&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb157-59"><a href="applying-results-to-2023-season.html#cb157-59" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> pq)) <span class="sc">+</span></span>
<span id="cb157-60"><a href="applying-results-to-2023-season.html#cb157-60" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">after_stat</span>(count <span class="sc">/</span> <span class="fu">sum</span>(count))), <span class="at">binwidth=</span><span class="fl">0.01</span>) <span class="sc">+</span></span>
<span id="cb157-61"><a href="applying-results-to-2023-season.html#cb157-61" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>,<span class="fl">0.05</span>)<span class="sc">+</span></span>
<span id="cb157-62"><a href="applying-results-to-2023-season.html#cb157-62" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;2-2&quot;</span>)<span class="sc">+</span></span>
<span id="cb157-63"><a href="applying-results-to-2023-season.html#cb157-63" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span>
<span id="cb157-64"><a href="applying-results-to-2023-season.html#cb157-64" tabindex="-1"></a>three_zero <span class="ot">&lt;-</span> mlbraw2023 <span class="sc">%&gt;%</span></span>
<span id="cb157-65"><a href="applying-results-to-2023-season.html#cb157-65" tabindex="-1"></a>  <span class="fu">filter</span>(count <span class="sc">==</span> <span class="st">&quot;3-0&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb157-66"><a href="applying-results-to-2023-season.html#cb157-66" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> pq)) <span class="sc">+</span></span>
<span id="cb157-67"><a href="applying-results-to-2023-season.html#cb157-67" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">after_stat</span>(count <span class="sc">/</span> <span class="fu">sum</span>(count))), <span class="at">binwidth=</span><span class="fl">0.01</span>) <span class="sc">+</span></span>
<span id="cb157-68"><a href="applying-results-to-2023-season.html#cb157-68" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>,<span class="fl">0.05</span>)<span class="sc">+</span></span>
<span id="cb157-69"><a href="applying-results-to-2023-season.html#cb157-69" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;3-0&quot;</span>)<span class="sc">+</span></span>
<span id="cb157-70"><a href="applying-results-to-2023-season.html#cb157-70" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span>
<span id="cb157-71"><a href="applying-results-to-2023-season.html#cb157-71" tabindex="-1"></a>three_one <span class="ot">&lt;-</span> mlbraw2023 <span class="sc">%&gt;%</span></span>
<span id="cb157-72"><a href="applying-results-to-2023-season.html#cb157-72" tabindex="-1"></a>  <span class="fu">filter</span>(count <span class="sc">==</span> <span class="st">&quot;3-1&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb157-73"><a href="applying-results-to-2023-season.html#cb157-73" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> pq)) <span class="sc">+</span></span>
<span id="cb157-74"><a href="applying-results-to-2023-season.html#cb157-74" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">after_stat</span>(count <span class="sc">/</span> <span class="fu">sum</span>(count))), <span class="at">binwidth=</span><span class="fl">0.01</span>) <span class="sc">+</span></span>
<span id="cb157-75"><a href="applying-results-to-2023-season.html#cb157-75" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>,<span class="fl">0.05</span>)<span class="sc">+</span></span>
<span id="cb157-76"><a href="applying-results-to-2023-season.html#cb157-76" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;3-1&quot;</span>)<span class="sc">+</span></span>
<span id="cb157-77"><a href="applying-results-to-2023-season.html#cb157-77" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span>
<span id="cb157-78"><a href="applying-results-to-2023-season.html#cb157-78" tabindex="-1"></a>three_two <span class="ot">&lt;-</span> mlbraw2023 <span class="sc">%&gt;%</span></span>
<span id="cb157-79"><a href="applying-results-to-2023-season.html#cb157-79" tabindex="-1"></a>  <span class="fu">filter</span>(count <span class="sc">==</span> <span class="st">&quot;3-2&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb157-80"><a href="applying-results-to-2023-season.html#cb157-80" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> pq)) <span class="sc">+</span></span>
<span id="cb157-81"><a href="applying-results-to-2023-season.html#cb157-81" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">after_stat</span>(count <span class="sc">/</span> <span class="fu">sum</span>(count))), <span class="at">binwidth=</span><span class="fl">0.01</span>) <span class="sc">+</span></span>
<span id="cb157-82"><a href="applying-results-to-2023-season.html#cb157-82" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>,<span class="fl">0.05</span>)<span class="sc">+</span></span>
<span id="cb157-83"><a href="applying-results-to-2023-season.html#cb157-83" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;3-2&quot;</span>)<span class="sc">+</span></span>
<span id="cb157-84"><a href="applying-results-to-2023-season.html#cb157-84" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span>
<span id="cb157-85"><a href="applying-results-to-2023-season.html#cb157-85" tabindex="-1"></a></span>
<span id="cb157-86"><a href="applying-results-to-2023-season.html#cb157-86" tabindex="-1"></a><span class="fu">ggarrange</span>(zero_zero, zero_one, zero_two,</span>
<span id="cb157-87"><a href="applying-results-to-2023-season.html#cb157-87" tabindex="-1"></a>          one_zero, one_one, one_two,</span>
<span id="cb157-88"><a href="applying-results-to-2023-season.html#cb157-88" tabindex="-1"></a>          two_zero, two_one, two_two,</span>
<span id="cb157-89"><a href="applying-results-to-2023-season.html#cb157-89" tabindex="-1"></a>          three_zero, three_one, three_two</span>
<span id="cb157-90"><a href="applying-results-to-2023-season.html#cb157-90" tabindex="-1"></a>          , <span class="at">ncol=</span><span class="dv">3</span>, <span class="at">nrow=</span><span class="dv">4</span>)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/distribution%20of%20location%20quality%20by%20count-1.png" width="768" style="display: block; margin: auto auto auto 0;" /></p>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="applying-results-to-2023-season.html#cb158-1" tabindex="-1"></a><span class="fu">rm</span>(zero_zero, zero_one, zero_two,</span>
<span id="cb158-2"><a href="applying-results-to-2023-season.html#cb158-2" tabindex="-1"></a>   one_zero, one_one, one_two,</span>
<span id="cb158-3"><a href="applying-results-to-2023-season.html#cb158-3" tabindex="-1"></a>   two_zero, two_one, two_two,</span>
<span id="cb158-4"><a href="applying-results-to-2023-season.html#cb158-4" tabindex="-1"></a>   three_zero, three_one, three_two)</span></code></pre></div>
</div>
<div id="final-cleaning" class="section level2 hasAnchor" number="7.4">
<h2><span class="header-section-number">7.4</span> Final Cleaning<a href="applying-results-to-2023-season.html#final-cleaning" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Here is the final cleaning I’ll apply to the 2023 data frame before plugging it into a dashboard and view how pitchers ranked across this new pitch location metric.</p>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="applying-results-to-2023-season.html#cb159-1" tabindex="-1"></a>top100 <span class="ot">&lt;-</span> mlbraw2023 <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(player_name) <span class="sc">%&gt;%</span> <span class="fu">count</span>() <span class="sc">%&gt;%</span> <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">100</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>n)</span>
<span id="cb159-2"><a href="applying-results-to-2023-season.html#cb159-2" tabindex="-1"></a>top100 <span class="ot">&lt;-</span> top100<span class="sc">$</span>player_name</span>
<span id="cb159-3"><a href="applying-results-to-2023-season.html#cb159-3" tabindex="-1"></a></span>
<span id="cb159-4"><a href="applying-results-to-2023-season.html#cb159-4" tabindex="-1"></a>mlbraw2023 <span class="ot">&lt;-</span> mlbraw2023 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(player_name <span class="sc">%in%</span> top100)</span>
<span id="cb159-5"><a href="applying-results-to-2023-season.html#cb159-5" tabindex="-1"></a></span>
<span id="cb159-6"><a href="applying-results-to-2023-season.html#cb159-6" tabindex="-1"></a>mlbraw2023 <span class="ot">&lt;-</span> mlbraw2023 <span class="sc">%&gt;%</span> </span>
<span id="cb159-7"><a href="applying-results-to-2023-season.html#cb159-7" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">player_name =</span> <span class="fu">str_replace_all</span>(player_name, <span class="st">&quot;Su\303\241rez&quot;</span>, <span class="st">&quot;Suarez&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb159-8"><a href="applying-results-to-2023-season.html#cb159-8" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">player_name =</span> <span class="fu">str_replace_all</span>(player_name, <span class="st">&quot;Berr\303\255os, Jos\303\251&quot;</span>, <span class="st">&quot;Berrios, Jose&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb159-9"><a href="applying-results-to-2023-season.html#cb159-9" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">player_name =</span> <span class="fu">str_replace_all</span>(player_name, <span class="st">&quot;P\303\251rez, Mart\303\255n&quot;</span>, <span class="st">&quot;Perez, Martin&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb159-10"><a href="applying-results-to-2023-season.html#cb159-10" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">player_name =</span> <span class="fu">str_replace_all</span>(player_name, <span class="st">&quot;L\303\263pez&quot;</span>, <span class="st">&quot;Lopez&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb159-11"><a href="applying-results-to-2023-season.html#cb159-11" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">player_name =</span> <span class="fu">str_replace_all</span>(player_name, <span class="st">&quot;Jes\303\272s&quot;</span>, <span class="st">&quot;Jesus&quot;</span>))</span>
<span id="cb159-12"><a href="applying-results-to-2023-season.html#cb159-12" tabindex="-1"></a></span>
<span id="cb159-13"><a href="applying-results-to-2023-season.html#cb159-13" tabindex="-1"></a><span class="fu">rm</span>(top100)</span></code></pre></div>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="applying-results-to-2023-season.html#cb160-1" tabindex="-1"></a>pitch_type_perc <span class="ot">&lt;-</span> mlbraw2023 <span class="sc">%&gt;%</span><span class="fu">group_by</span>(player_name, pitch_type) <span class="sc">%&gt;%</span> <span class="fu">count</span>() <span class="sc">%&gt;%</span> <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb160-2"><a href="applying-results-to-2023-season.html#cb160-2" tabindex="-1"></a>  <span class="fu">inner_join</span>(mlbraw2023 <span class="sc">%&gt;%</span><span class="fu">group_by</span>(player_name) <span class="sc">%&gt;%</span> <span class="fu">count</span>() <span class="sc">%&gt;%</span> <span class="fu">ungroup</span>(),</span>
<span id="cb160-3"><a href="applying-results-to-2023-season.html#cb160-3" tabindex="-1"></a>             <span class="fu">join_by</span>(player_name)) <span class="sc">%&gt;%</span></span>
<span id="cb160-4"><a href="applying-results-to-2023-season.html#cb160-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pitch_type_perc =</span> <span class="dv">100</span><span class="sc">*</span><span class="fu">round</span>(n.x<span class="sc">/</span>n.y, <span class="dv">2</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb160-5"><a href="applying-results-to-2023-season.html#cb160-5" tabindex="-1"></a>  <span class="fu">select</span>(player_name, pitch_type, pitch_type_perc)</span>
<span id="cb160-6"><a href="applying-results-to-2023-season.html#cb160-6" tabindex="-1"></a></span>
<span id="cb160-7"><a href="applying-results-to-2023-season.html#cb160-7" tabindex="-1"></a>mlbraw2023 <span class="ot">&lt;-</span> mlbraw2023 <span class="sc">%&gt;%</span> <span class="fu">inner_join</span>(pitch_type_perc, <span class="fu">join_by</span>(player_name, pitch_type))</span>
<span id="cb160-8"><a href="applying-results-to-2023-season.html#cb160-8" tabindex="-1"></a></span>
<span id="cb160-9"><a href="applying-results-to-2023-season.html#cb160-9" tabindex="-1"></a><span class="fu">rm</span>(pitch_type_perc)</span></code></pre></div>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="applying-results-to-2023-season.html#cb161-1" tabindex="-1"></a>mlbraw2023 <span class="ot">&lt;-</span> mlbraw2023 <span class="sc">%&gt;%</span></span>
<span id="cb161-2"><a href="applying-results-to-2023-season.html#cb161-2" tabindex="-1"></a>  <span class="fu">separate</span>(player_name, <span class="fu">c</span>(<span class="st">&quot;name1&quot;</span>, <span class="st">&quot;name2&quot;</span>), <span class="st">&quot;, &quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb161-3"><a href="applying-results-to-2023-season.html#cb161-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">player_name =</span> <span class="fu">paste</span>(name2, name1, <span class="at">sep =</span> <span class="st">&quot; &quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb161-4"><a href="applying-results-to-2023-season.html#cb161-4" tabindex="-1"></a>  <span class="fu">select</span>(player_name, pitch_type, pitch_name, count, hand, </span>
<span id="cb161-5"><a href="applying-results-to-2023-season.html#cb161-5" tabindex="-1"></a>         plate_x, plate_z, pq, pitch_type_perc)</span></code></pre></div>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="applying-results-to-2023-season.html#cb162-1" tabindex="-1"></a>mlbraw2023 <span class="ot">&lt;-</span> mlbraw2023 <span class="sc">%&gt;%</span></span>
<span id="cb162-2"><a href="applying-results-to-2023-season.html#cb162-2" tabindex="-1"></a>  <span class="fu">group_by</span>(player_name) <span class="sc">%&gt;%</span></span>
<span id="cb162-3"><a href="applying-results-to-2023-season.html#cb162-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">pq=</span><span class="fu">mean</span>(pq)) <span class="sc">%&gt;%</span></span>
<span id="cb162-4"><a href="applying-results-to-2023-season.html#cb162-4" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb162-5"><a href="applying-results-to-2023-season.html#cb162-5" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(pq)) <span class="sc">%&gt;%</span></span>
<span id="cb162-6"><a href="applying-results-to-2023-season.html#cb162-6" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rank =</span> <span class="fu">row_number</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb162-7"><a href="applying-results-to-2023-season.html#cb162-7" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">player_rank =</span> <span class="fu">paste</span>(rank, <span class="st">&quot; - &quot;</span>, player_name)) <span class="sc">%&gt;%</span></span>
<span id="cb162-8"><a href="applying-results-to-2023-season.html#cb162-8" tabindex="-1"></a>  <span class="fu">inner_join</span>(mlbraw2023, <span class="fu">join_by</span>(player_name)) <span class="sc">%&gt;%</span></span>
<span id="cb162-9"><a href="applying-results-to-2023-season.html#cb162-9" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">pq =</span> pq.y) <span class="sc">%&gt;%</span></span>
<span id="cb162-10"><a href="applying-results-to-2023-season.html#cb162-10" tabindex="-1"></a>  <span class="fu">select</span>(player_rank, player_name, pitch_type, pitch_name, count, </span>
<span id="cb162-11"><a href="applying-results-to-2023-season.html#cb162-11" tabindex="-1"></a>         hand, plate_x, plate_z, pq, pitch_type_perc) <span class="sc">%&gt;%</span></span>
<span id="cb162-12"><a href="applying-results-to-2023-season.html#cb162-12" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">player_name =</span> player_rank) <span class="sc">%&gt;%</span></span>
<span id="cb162-13"><a href="applying-results-to-2023-season.html#cb162-13" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>player_rank)</span></code></pre></div>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="applying-results-to-2023-season.html#cb163-1" tabindex="-1"></a>mlbraw2023<span class="sc">$</span>pitch_type <span class="ot">&lt;-</span> <span class="fu">factor</span>(mlbraw2023<span class="sc">$</span>pitch_type, </span>
<span id="cb163-2"><a href="applying-results-to-2023-season.html#cb163-2" tabindex="-1"></a>                                <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;FF&quot;</span>,<span class="st">&quot;SI&quot;</span>,<span class="st">&quot;FC&quot;</span>,<span class="st">&quot;FS&quot;</span>,<span class="st">&quot;CH&quot;</span>,<span class="st">&quot;CU&quot;</span>,<span class="st">&quot;SL&quot;</span>,<span class="st">&quot;ST&quot;</span>))</span>
<span id="cb163-3"><a href="applying-results-to-2023-season.html#cb163-3" tabindex="-1"></a></span>
<span id="cb163-4"><a href="applying-results-to-2023-season.html#cb163-4" tabindex="-1"></a>mlbraw2023<span class="sc">$</span>pitch_name <span class="ot">&lt;-</span> <span class="fu">factor</span>(mlbraw2023<span class="sc">$</span>pitch_name, </span>
<span id="cb163-5"><a href="applying-results-to-2023-season.html#cb163-5" tabindex="-1"></a>                                <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;Sweeper&quot;</span>,<span class="st">&quot;Slider&quot;</span>,<span class="st">&quot;Curveball&quot;</span>,<span class="st">&quot;Changeup&quot;</span>,</span>
<span id="cb163-6"><a href="applying-results-to-2023-season.html#cb163-6" tabindex="-1"></a>                                           <span class="st">&quot;Splitter&quot;</span>,<span class="st">&quot;Cutter&quot;</span>,<span class="st">&quot;Sinker&quot;</span>,<span class="st">&quot;Fastball&quot;</span>))</span></code></pre></div>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="applying-results-to-2023-season.html#cb164-1" tabindex="-1"></a>color_pitch <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">pitch_name =</span> <span class="fu">unique</span>(mlbraw2023<span class="sc">$</span>pitch_name),</span>
<span id="cb164-2"><a href="applying-results-to-2023-season.html#cb164-2" tabindex="-1"></a>                      <span class="at">colors =</span> <span class="fu">c</span>(<span class="st">&quot;#FBB4AE&quot;</span>,<span class="st">&quot;#B3CDE3&quot;</span>,<span class="st">&quot;#CCEBC5&quot;</span>,<span class="st">&quot;#DECBE4&quot;</span>,</span>
<span id="cb164-3"><a href="applying-results-to-2023-season.html#cb164-3" tabindex="-1"></a>                                 <span class="st">&quot;#FED9A6&quot;</span>,<span class="st">&quot;#FFFFCC&quot;</span>,<span class="st">&quot;#E5D8BD&quot;</span>,<span class="st">&quot;#FDDAEC&quot;</span>))</span>
<span id="cb164-4"><a href="applying-results-to-2023-season.html#cb164-4" tabindex="-1"></a></span>
<span id="cb164-5"><a href="applying-results-to-2023-season.html#cb164-5" tabindex="-1"></a>mlbraw2023 <span class="ot">&lt;-</span> mlbraw2023 <span class="sc">%&gt;%</span></span>
<span id="cb164-6"><a href="applying-results-to-2023-season.html#cb164-6" tabindex="-1"></a>  <span class="fu">inner_join</span>(color_pitch, <span class="fu">join_by</span>(pitch_name))</span>
<span id="cb164-7"><a href="applying-results-to-2023-season.html#cb164-7" tabindex="-1"></a></span>
<span id="cb164-8"><a href="applying-results-to-2023-season.html#cb164-8" tabindex="-1"></a><span class="fu">rm</span>(color_pitch)</span>
<span id="cb164-9"><a href="applying-results-to-2023-season.html#cb164-9" tabindex="-1"></a></span>
<span id="cb164-10"><a href="applying-results-to-2023-season.html#cb164-10" tabindex="-1"></a>mlbraw2023<span class="sc">$</span>pq <span class="ot">&lt;-</span> <span class="fu">as.double</span>(mlbraw2023<span class="sc">$</span>pq)</span>
<span id="cb164-11"><a href="applying-results-to-2023-season.html#cb164-11" tabindex="-1"></a></span>
<span id="cb164-12"><a href="applying-results-to-2023-season.html#cb164-12" tabindex="-1"></a>text <span class="ot">&lt;-</span> mlbraw2023 <span class="sc">%&gt;%</span></span>
<span id="cb164-13"><a href="applying-results-to-2023-season.html#cb164-13" tabindex="-1"></a>  <span class="fu">group_by</span>(player_name) <span class="sc">%&gt;%</span></span>
<span id="cb164-14"><a href="applying-results-to-2023-season.html#cb164-14" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">pq=</span> <span class="fu">round</span>(<span class="fu">mean</span>(pq),<span class="dv">3</span>), <span class="at">.groups =</span> <span class="st">&#39;drop&#39;</span>)</span>
<span id="cb164-15"><a href="applying-results-to-2023-season.html#cb164-15" tabindex="-1"></a></span>
<span id="cb164-16"><a href="applying-results-to-2023-season.html#cb164-16" tabindex="-1"></a>loli <span class="ot">&lt;-</span> mlbraw2023 <span class="sc">%&gt;%</span></span>
<span id="cb164-17"><a href="applying-results-to-2023-season.html#cb164-17" tabindex="-1"></a>  <span class="fu">group_by</span>(player_name, pitch_name, pitch_type_perc, colors) <span class="sc">%&gt;%</span></span>
<span id="cb164-18"><a href="applying-results-to-2023-season.html#cb164-18" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">pq=</span> <span class="fu">round</span>(<span class="fu">mean</span>(pq),<span class="dv">2</span>), <span class="at">.groups =</span> <span class="st">&#39;drop&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb164-19"><a href="applying-results-to-2023-season.html#cb164-19" tabindex="-1"></a>  <span class="fu">filter</span>(pitch_type_perc <span class="sc">&gt;</span> <span class="dv">2</span>)</span>
<span id="cb164-20"><a href="applying-results-to-2023-season.html#cb164-20" tabindex="-1"></a></span>
<span id="cb164-21"><a href="applying-results-to-2023-season.html#cb164-21" tabindex="-1"></a>bar <span class="ot">&lt;-</span> mlbraw2023 <span class="sc">%&gt;%</span></span>
<span id="cb164-22"><a href="applying-results-to-2023-season.html#cb164-22" tabindex="-1"></a>  <span class="fu">select</span>(player_name, pq)</span>
<span id="cb164-23"><a href="applying-results-to-2023-season.html#cb164-23" tabindex="-1"></a></span>
<span id="cb164-24"><a href="applying-results-to-2023-season.html#cb164-24" tabindex="-1"></a>pie <span class="ot">&lt;-</span> mlbraw2023 <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(player_name, pitch_name, colors) <span class="sc">%&gt;%</span> <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb164-25"><a href="applying-results-to-2023-season.html#cb164-25" tabindex="-1"></a>  <span class="fu">inner_join</span>(mlbraw2023 <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(player_name) <span class="sc">%&gt;%</span> <span class="fu">count</span>(),</span>
<span id="cb164-26"><a href="applying-results-to-2023-season.html#cb164-26" tabindex="-1"></a>             <span class="fu">join_by</span>(player_name)) <span class="sc">%&gt;%</span></span>
<span id="cb164-27"><a href="applying-results-to-2023-season.html#cb164-27" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">p=</span><span class="dv">100</span><span class="sc">*</span><span class="fu">round</span>(n.x<span class="sc">/</span>n.y, <span class="dv">2</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb164-28"><a href="applying-results-to-2023-season.html#cb164-28" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>n.x, <span class="sc">-</span>n.y) <span class="sc">%&gt;%</span></span>
<span id="cb164-29"><a href="applying-results-to-2023-season.html#cb164-29" tabindex="-1"></a>  <span class="fu">filter</span>(p <span class="sc">&gt;</span> <span class="dv">2</span>)</span></code></pre></div>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="applying-results-to-2023-season.html#cb165-1" tabindex="-1"></a><span class="fu">write_csv</span>(text,<span class="st">&quot;/Users/dougrose/Desktop/pitch_location_quality/location_quality_app/text.csv&quot;</span>)</span>
<span id="cb165-2"><a href="applying-results-to-2023-season.html#cb165-2" tabindex="-1"></a><span class="fu">write_csv</span>(loli,<span class="st">&quot;/Users/dougrose/Desktop/pitch_location_quality/location_quality_app/loli.csv&quot;</span>)</span>
<span id="cb165-3"><a href="applying-results-to-2023-season.html#cb165-3" tabindex="-1"></a><span class="fu">write_csv</span>(bar,<span class="st">&quot;/Users/dougrose/Desktop/pitch_location_quality/location_quality_app/bar.csv&quot;</span>)</span>
<span id="cb165-4"><a href="applying-results-to-2023-season.html#cb165-4" tabindex="-1"></a><span class="fu">write_csv</span>(pie,<span class="st">&quot;/Users/dougrose/Desktop/pitch_location_quality/location_quality_app/pie.csv&quot;</span>)</span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="visualizing-resulting-plots.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="shiny-dashbaord.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/drose1988/pitch_location_quality_project/edit/main/07-applying_results_to_2023.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/drose1988/pitch_location_quality_project/blob/main/07-applying_results_to_2023.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
